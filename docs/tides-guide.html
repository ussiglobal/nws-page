<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒŠ Tides & Flag Guide</title>

  <!-- Weather Icons (optional) -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  <!-- Shared styles -->
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <h1>ğŸŒŠ Tide Times</h1>
  <h2 class="subtitle">Melbourne, FL</h2>

  <section id="tide-times">
    <p id="tide-port">Port Canaveral: --</p>
    <p id="tide-seb">Sebastian Inlet: --</p>
  </section>

  <h1>âš ï¸ Rip-Current Flag Guide</h1>
  <section id="flag-guide">
    <p><i class="fas fa-flag" style="color:#4CAF50"></i>
       <strong>Green Flag</strong> â€“ Low Risk</p>
    <p><i class="fas fa-flag" style="color:#FFC107"></i>
       <strong>Yellow Flag</strong> â€“ Moderate Risk</p>
    <p><i class="fas fa-flag" style="color:#FF0000"></i>
       <strong>Red Flag</strong> â€“ High Risk</p>
    <p><i class="fas fa-flag" style="color:#FF0000"></i>
       <i class="fas fa-flag" style="color:#FF0000"></i>
       <strong>Double Red Flag</strong> â€“ Extreme Hazard</p>
    <p><i class="fas fa-flag" style="color:purple"></i>
       <strong>Purple Flag</strong> â€“ Marine Hazards</p>
  </section>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    fetch('data/melbourne_fl_summary.txt')
      .then(r => { if (!r.ok) throw new Error(r.status); return r.text(); })
      .then(txt => {
        const L = txt.split('\n');
        const zoneID = 'Coastal Indian River-Mainland Southern Brevard';
        const start  = L.findIndex(l => l.includes(zoneID));
        if (start > -1) {
          let end = L.findIndex((l,i) => i>start && l.trim()==='&&');
          if (end===-1) end = L.length;
          const Z = L.slice(start, end);

          // Port Canaveral
          const pHigh = Z.filter(l=>l.includes('Port Canaveral')&&/High/i.test(l)).map(l=>l.trim());
          const pLow  = Z.filter(l=>l.includes('Port Canaveral')&&/Low /i.test(l)).map(l=>l.trim());
          const portLines = pHigh.length ? [...pHigh,...pLow] : (pLow[0]?[pLow[0]]:[]);
          if (portLines.length) {
            document.getElementById('tide-port').innerHTML = portLines.join('<br>');
          }

          // Sebastian Inlet
          const sHigh = Z.filter(l=>l.includes('Sebastian Inlet')&&/High/i.test(l)).map(l=>l.trim());
          const sLow  = Z.filter(l=>l.includes('Sebastian Inlet')&&/Low /i.test(l)).map(l=>l.trim());
          const sebLines = sHigh.length ? [...sHigh,...sLow] : (sLow[0]?[sLow[0]]:[]);
          if (sebLines.length) {
            document.getElementById('tide-seb').innerHTML = sebLines.join('<br>');
          }
        }
      })
      .catch(console.error);
  });
  </script>
</body>
</html>

